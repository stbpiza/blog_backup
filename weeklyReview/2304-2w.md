![](https://velog.velcdn.com/images/stbpiza/post/c217cb4c-d66c-4150-a544-dab172b6ee7b/image.png)

# 4월 10일 ~ 4월 16일 주간회고


## 잡담
이번주 부터 메가테라 백엔드 생존코스에 참여하게 되었다.
작년에는 회사에서 개발하는 부분에 대해서만 공부하고,
추가적인 나만의 공부를 거의 못했었다.

이번 메가테라를 원동력으로 삼아서 정말 필요한 기본기들을 공부하고,
공부하는 습관을 제대로 들이고자 한다.

수요일과 금요일에 11시까지 야근하고 집에오니 12시여서 공부를 못했다.
새벽까지 공부하면 다음날 업무에 지장이 생기고, 또 야근을 해야하는 악순환을 만들기 싫어서 바로 잤다.
업무 시간에 최대한 집중하고 퇴근을 일찍해서 공부시간을 확보하는 방향으로 노력하고자 한다.

## 업무 회고
이번주 업무하면서 만난 문제들을 해결했던 케이스들

### 날짜 쿼리 문제

특정 기간 동안 매일 그날 작성한 게시물을 찾는 쿼리를 작성했었다.
예를 들면, 아래처럼 기간 설정을 하면
2023-04-01 13:00:00 ~ 2023-04-03 22:00:00
4월 2일 00시 05분에 4월1일 13시부터 4월 1일 23시59분59초까지 작성한 게시물을 불러와야한다.
4월 3일 00시 05분에 4월2일 00시부터 4월 2일 23시59분59초까지 불러오고,
4월 4일 00시 05분에 4월3일 00시부터 4월 3일 22시 까지 불러와야 한다.

일단 매일 00시 05분에 기간 설정해둔 table에서 어제 날짜가 포함되어 있는 케이스를 불러와야 하는데,
where절 작성이 명확하게 떠오르지 않았다.
결국 생각한 방법은
( 시작일 > 어제 00시 AND 시작일 < 어제 23시59분59초 ) OR
( 시작일 < 어제 00시 AND 종료일 > 어제 00시 ) OR
( 종료일 > 어제 00시 AND 종료일 < 어제 23시59분59초 )
였는데 더 깔끔하고 명확한 방법이 있는지 계속 고민해봐야겠다.

### 메인화면 조회 api 메모리 부족
메인화면에서 불러오는 데이터가 너무 많아서, 단건 조회 만으로도 메모리 부족 문제가 발생했다.
기존 레거시 코드 자체가 일단 다 불러오고 서버단에서 보여줄 데이터와 숨길 데이터를 구분해서 배열에 담는 식이었고,
게시물 하나에 불러오는 join table도 많아서, 메인화면에 게시물이 많이 추가되면 조회 row수가 폭발적으로 늘어났다.

급하게 코드를 수정해보려 했지만 다른 api와 함께 사용하는 로직들이 얽혀있어서 쉽게 수정할 수 없는 상태였다.
결국은 메인화면에 불러오는 게시물 수를 줄여서 일단은 정상적으로 사용할 수 있게 임시로 해결했고,
본격적으로 api를 수정해야겠다고 생각했다.

그리고 메인화면은 유저들이 자주 보는 화면이고, 데이터 수정이 자주 일어나지 않기 때문에,
캐시에 저장해서 빠르게 응답할 수 있도록 수정해야겠다고 생각했다.


## 학습 회고
이번주에는 HTTP에 대해 학습했다.
HTTP에 대해 기본적인 내용들은 알고있었어서 완전 새로운 학습은 아니었지만,
내가 모르고 있었던 지식 구멍들을 찾을 수 있었고, 채울 수 있었다.


### 멱등성
멱등성은 이번에 처음 배운 부분이었는데, 마침 이번주에 회사에서 문제가 있던 부분과 연관이 있었다.
메인 페이지에서 너무 많은 정보들을 조회하다보니 성능상 이슈가 있었고,
캐시에 저장해서 빠르게 보여주면 좋겠다고 생각했다.
하지만 게시물 좋아요 유무, 저장 유무를 같이 보내주다보니 유저마다 받는 데이터가 달랐다.
유저가 달라져도 멱등성이 유지될 수 있도록 설계한다면, 데이터를 캐시에 저장해서 빠르게 응답할 수 있겠다는 생각이 들었다.

### Java text blocks
쉽고 간편하게 String 작성이 가능해서 활용할 기회가 생기면 사용해보고 싶다.
다만 새롭게 추가된 기능인 만큼 단점에 대해 잘 찾아보고 써야겠다.

### try-with-resources
최근에는 SpringBoot에서만 작업하다보니 자원을 직접 열고 닫고 할 일이 없었다.
그래서 이런 기능이 있는지 몰랐는데, 기계적으로 반복해서 입력하는 코드를 줄여주는 고마운 기능 같다.

### Java ServerSocket
소켓에 대해서는 간단하게만 알고 있었는데,
직접 사용해보니 재미있었다.

부트캠프에서 처음 개인 프로젝트를 만들었을당시에
DB에서 조회해온 데이터를 한줄씩 읽으면서 DTO에 담았었던 추억이 생각났다.

평소에는 추상화된 기능으로 쉽고 편하게 사용하다보니 모르고 넘어갈 수 있었던 부분을
직접 다뤄볼 수 있어서 재밌었다.

## 마무리

이번주에는 학습 진도를 다 소화하지 못했는데, 다음주에 더 노력해서 조금씩 채워나가야겠다.