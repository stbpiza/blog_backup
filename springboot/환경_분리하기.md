# [Spring Boot] í™˜ê²½ ë¶„ë¦¬í•˜ê¸°

![](https://images.velog.io/images/stbpiza/post/7a64740e-dbaf-40ec-9916-39d1005e1f7f/springboot.png)
# í™˜ê²½ë¶„ë¦¬ì˜ í•„ìš”ì„±
ì‹¤ì œ ë°°í¬í•  ì„œë¹„ìŠ¤ë¼ë©´,
ê°œë°œ ì„œë²„ì™€ ìš´ì˜ ì„œë²„ë¥¼ ë‚˜ëˆ ì„œ ê´€ë¦¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
ì¶”ê°€ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ë„ ë¶„ë¦¬í•´ì£¼ë©´ ì¢‹ê³ ,
JPAë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `ddl-auto: create` ë¥¼ ì‚¬ìš©í•˜ëŠ”
ì´ˆê¸° í™˜ê²½ì„¸íŒ…ë„ ë¶„ë¦¬í•´ë‘ë©´ ìš´ì˜ ì„œë²„ì—ì„œ createê°€ ì‹¤í–‰ë˜ëŠ”
ëŒ€ì°¸ì‚¬ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# í™˜ê²½ë¶„ë¦¬í•˜ëŠ” ë°©ë²•
í™˜ê²½ë¶„ë¦¬ ë°©ë²•ì„ ì°¾ì•„ë³´ë‹ˆ í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
```
1. yml íŒŒì¼ ë‚˜ëˆ„ê¸°
2. í•˜ë‚˜ì˜ yml íŒŒì¼ ì•ˆì—ì„œ ë‚˜ëˆ„ê¸°
```

ë‘ ê°€ì§€ ë°©ë²•ì„ ëª¨ë‘ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## ê¸°ë³¸ í™˜ê²½ ì„¸íŒ…

![](https://images.velog.io/images/stbpiza/post/f52e0478-e5b7-4129-a3af-689985d29b4d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.22.33.png)

JPAì™€ ìŠ¤í”„ë§ë¶€íŠ¸`2.5.3`ë¡œ ê¸°ë³¸ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

EntityëŠ” ê°„ë‹¨í•˜ê²Œ User í•˜ë‚˜ ë§Œë“¤ì–´ ë‘ì—ˆìŠµë‹ˆë‹¤.

![](https://images.velog.io/images/stbpiza/post/3a18a0b9-047f-492f-9de6-bddc82ff5911/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.23.03.png)

ì‹¤í–‰í•´ë³´ë‹ˆ í¬íŠ¸ 8080ìœ¼ë¡œ ì˜ ì‹¤í–‰ë˜ê³ ,
`ddl-auto: create` ì„¤ì •ì— ë§ê²Œ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤.
![](https://images.velog.io/images/stbpiza/post/bf02ad09-2fe0-4fbb-a544-52e9f2f06413/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%209.32.14.png)

dbì—ë„ ì˜ ìƒì„±ì´ ë˜ì—ˆë„¤ìš”

ì´ì œ í™˜ê²½ì„ ë¶„ë¦¬í•´ë´…ì‹œë‹¤.


## yml íŒŒì¼ ë‚˜ëˆ„ê¸°

![](https://images.velog.io/images/stbpiza/post/b11a5bed-f89e-4544-b09a-a7fe090774fa/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.58.35.png)

application.yml

```yml
server:
  port: 8080

spring:
  profiles:
    default: dev # ê¸°ë³¸ í™˜ê²½ì„ devë¡œ

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/profiledemo?serverTimezone=Asia/Seoul
    username: root
    password: abcd

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
    show-sql: true
```

application-create.yml
```yml
server:
  port: 8081

spring:
  config:
    activate:
      on-profile: create # í™˜ê²½ì´ë¦„ì„¤ì •

  jpa:
    hibernate:
      ddl-auto: create

```

application-dev.yml
```yml
server:
  port: 8082

spring:
  config:
    activate:
      on-profile: dev

  jpa:
    hibernate:
      ddl-auto: update
```

application-prod.yml
```yml
server:
  port: 8083

spring:
  config:
    activate:
      on-profile: prod

  jpa:
    hibernate:
      ddl-auto: none
```

ì„¸ê°€ì§€ íŒŒì¼ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
ê¸°ë³¸ yml ì„¤ì •ì— ì‘ì„±í•œ ë‚´ìš©ë“¤ì—ê²Œ
ì¶”ê°€ë¡œ profileì— ì‘ì„±í•œ ë‚´ìš©ë“¤ì´ ë®ì–´ì“°ê¸° ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” port ë²ˆí˜¸ì™€ ddl-auto ì„¤ì •ë§Œ ë°”ê¿¨ëŠ”ë°,
datasource ì„¸íŒ…ì´ë‚˜ ë‹¤ë¥¸ ì„¤ì •ë“¤ë„ ì‘ì„±í•˜ì—¬ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://images.velog.io/images/stbpiza/post/88777300-a26f-4d93-95bc-b9bf3b54c175/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.56.00.png)

ì¸í…”ë¦¬ì œì´ì—ì„œ Edit Configurationsë¡œ ë“¤ì–´ê°€ì„œ
Active profiles ë¶€ë¶„ì— ì›í•˜ëŠ” profileëª…ì„ ì…ë ¥í•˜ë©´
í•´ë‹¹ ì„¸íŒ…ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

![](https://images.velog.io/images/stbpiza/post/041ea7f9-bc19-4ba9-8797-dd1e7ac728f1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.57.14.png)
ì•„ë¬´ ì„¤ì • ì—†ì´ ì‹¤í–‰í•˜ë©´ defaultë¡œ ì„¤ì •í•´ë‘” dev ì„¸íŒ…ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
í¬íŠ¸8082ë¡œ ì˜ ì‹¤í–‰ë˜ì—ˆë„¤ìš”


![](https://images.velog.io/images/stbpiza/post/f2b0aae0-127e-44ca-8569-55b68fa24b0c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.56.42.png)
ì´ë²ˆì—” create ì„¸íŒ…ìœ¼ë¡œ ì‹¤í–‰í•´ ë´¤ìŠµë‹ˆë‹¤.
í¬íŠ¸ 8081ë¡œ ì‹¤í–‰ë˜ë©° `ddl-auto: create`ê°€ ì ìš©ë˜ì—ˆë„¤ìš”

![](https://images.velog.io/images/stbpiza/post/054c8064-d79c-40b3-b959-0127680c3b6f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.57.42.png)
prod ì„¸íŒ…ë„ ì˜ ì‹¤í–‰ë˜ë„¤ìš” (í¬íŠ¸ 8083)

## yml í•˜ë‚˜ë¡œ ë‚˜ëˆ„ê¸°

application.yml
```yml
server:
  port: 8080

spring:
  profiles:
    default: dev # ê¸°ë³¸ í™˜ê²½ì„ devë¡œ

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/profiledemo?serverTimezone=Asia/Seoul
    username: root
    password: abcd

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
    show-sql: true

---
server:
  port: 8081

spring:
  config:
    activate:
      on-profile: create # í™˜ê²½ì´ë¦„ì„¤ì •

  jpa:
    hibernate:
      ddl-auto: create

---
server:
  port: 8082

spring:
  config:
    activate:
      on-profile: dev

  jpa:
    hibernate:
      ddl-auto: update

---
server:
  port: 8083

spring:
  config:
    activate:
      on-profile: prod

  jpa:
    hibernate:
      ddl-auto: none
```

í•˜ë‚˜ì˜ yml íŒŒì¼ë¡œ ë‚˜ëˆŒë•Œì—ëŠ”
`---` ë¡œ ë‚˜ëˆ ì„œ ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.

yml íŒŒì¼ ì‘ì„±ë²•ë§Œ ë‹¤ë¥¼ë¿ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì´ë‚˜ ì‹¤í–‰ ê²°ê³¼ëŠ” ì—¬ëŸ¬ ymlì¼ë•Œì™€ ë˜‘ê°™ìŠµë‹ˆë‹¤.
ì‹¤í–‰í•´ë³´ë©´ ë¬¸ì œì—†ì´ ì˜ ë˜ë„¤ìš”.

## í…ŒìŠ¤íŠ¸ í™˜ê²½ ë‚˜ëˆ„ê¸°

![](https://images.velog.io/images/stbpiza/post/48166f10-1d5d-4961-a740-99213e2b4d6c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-25%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.33.01.png)

í…ŒìŠ¤íŠ¸ í™˜ê²½ ë‚˜ëˆ„ê¸°ëŠ” test í´ë”ì— resources í´ë”ë¥¼ ìƒì„±í•´ ì£¼ì‹œê³ 
application.yml íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

íŒŒì¼ì„ ë§Œë“¤ì–´ë§Œ ë‘ë©´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì‹œ í…ŒìŠ¤íŠ¸ìš© í™˜ê²½ì„¸íŒ…ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  JPAì˜ ê²½ìš° í…ŒìŠ¤íŠ¸ application.ymlì—ì„œ datasourceë¥¼ ì•„ì— ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´,
ìë™ìœ¼ë¡œ H2 dbë¡œ ì„¸íŒ…ë©ë‹ˆë‹¤.(H2 ì˜ì¡´ì„± ì¶”ê°€ëŠ” í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤)

## ë§ˆë¬´ë¦¬

ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜ˆì „ë²„ì „`2.4ì´ì „`ì—ì„œëŠ”
```yml
spring:
  profiles: dev
```
ë°©ì‹ìœ¼ë¡œ profile ì´ë¦„ì„¤ì •ì„ í–ˆì—ˆë‹¤ê³ í•©ë‹ˆë‹¤.

ëª¨ë“  ì†ŒìŠ¤ì½”ë“œëŠ” githubì— ìˆìŠµë‹ˆë‹¤
https://github.com/stbpiza/profileDemo

ì˜ëª»ëœ ë‚´ìš© ì§€ì ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤.ğŸ˜
ê°ì‚¬í•©ë‹ˆë‹¤.
